1999-01-19  Jeff Garzik  <jgarzik@pobox.com>

	* app/menus.c:
	Renamed deprecated Gtk+ function.

1999-01-16  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	* configure.in:
	* samples/Makefile.am:
	* samples/ER-demo.dia:
	* samples/UML-demo.dia:
	Added samples directory.
	Added samples for ER and UML.
	
	* app/commands.c:
	* app/disp_callbacks.c:
	* app/menus.c:
	Zoom is done by sqrt(2) instead of 2.
	Lots of more zoom options in the menu.

	* objects/ER/relationship.c:
	Relationships have 8 connectionpoints instead of 4.

	* objects/UML/class.c:
	UML class name font a bit smaller.
	Fixed stupid bug in the copy operation.
	
	* app/display.c:
	Displays are opened at 500x400 instead of 256x256.

	* app/load_save.c:
	Fixup of internal error message.

	* app/color_area.c:
	* app/diagram.c:
	* app/modify_tool.c:
	* lib/object.c:
	Removed debug printf's.
	
	* TODO (BUGS):
	Added new known bug.

1999-01-16  Alexander Larsson  <alla@lysator.liu.se>

	* app/interface.c:
	* app/menus.c:
	Fixed so accelerator groups work in all windows.
	Updated to new gtk function names.

	* TODO (BUGS):
	Removed fixed bug.

	* app/display.c:
	Updated to new gtk function names.
	Set sensitivity of the align menu items.	

	* objects/ER/pixmaps/Makefile.am:
	* objects/UML/pixmaps/Makefile.am:
	* objects/network/pixmaps/Makefile.am:
	Fix so that make dist works.

	* app/app_procs.c:
	* app/color_area.c:
	* app/commands.c:
	* app/diagram.c:
	* app/grid.c:
	* app/layer_dialog.c:
	* app/load_save.c:
	* app/object_ops.c:
	* app/properties.c:
	* lib/diagramdata.[ch]:	
	* lib/message.c:
	* lib/objects/ER/attribute.c:
	* lib/objects/ER/entity.c:
	* lib/objects/ER/participation.c:
	* lib/objects/ER/relationship.c:
	* lib/objects/ER/.c:
	* objects/UML/actor.c:
	* objects/UML/association.c:
	* objects/UML/class_dialog.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/large_package.c:
	* objects/UML/realizes.c:
	* objects/UML/.c:
	* objects/UML/.c:
	Updated to new gtk function names.
	Removed warnings.

1999-01-15  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Update TODO.

	* app/app_procs.c:
	Fixed loading of diagrams specified as arguments.

	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/er.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	Updated the ER objects.
	

1999-01-14  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	* app/Makefile.am:
	* objects/Makefile.am:
	* objects/ER/attribute.c:
	* objects/ER/entity.c:
	* objects/ER/er.c:
	* objects/ER/participation.c:
	* objects/ER/relationship.c:
	* objects/ER/pixmaps/Makefile.am:
	* objects/ER/pixmaps/attribute.xpm:
	* objects/ER/pixmaps/entity.xpm:
	* objects/ER/pixmaps/participation.xpm:
	* objects/ER/pixmaps/relationship.xpm:
	* objects/ER/pixmaps/weakentity.xpm:
	First commit of entity relationship objects.
	These were done by hallon@lysator.liu.se.
	There are still stuff to do on these.
	
1999-01-14  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Updates.

	* app/diagram.[ch]:
	Change diagram_remove_all_selected to take new argument
	delete_empty. Empty objects are deleted only if it is TRUE.
	Removed call to close_eps_renderer. This is now done in end_render
	in the eps renderer.

	* app/create_object.c:
	* app/layer_dialog.c:
	Update calls to diagram_remove_all_selected.

	* app/commands.c:
	Update calls to diagram_remove_all_selected.
	Some code reformating.
	Changed order of adding updates i align_h and align_v.

	* app/modify_tool.c:
	Update calls to diagram_remove_all_selected.
	Added pointer grab when doing rubber-band selection, this fixes
	the bug when draging the box over to another window.

	* app/connectionpoint_ops.[ch]:
	diagram_update_connections_object changed to take an argument
	update_nonmoved. This lets connections that has not moved, but
	the stuff they're connected to has been moved work.
	Update calls to the new diagram_update_connections_object.

	* app/properties.c:
	Update calls to the new diagram_update_connections_object.
	Update extents when properties are applied.
	
	* app/disp_callbacks.c:
	Added support for zooming with the '+' and '-' keys.

	* app/menus.c:
	Removed old keyboard shortcuts for zoom.

	* lib/render.h:
	Added calls begin_render and end_render to renderer.
	These can be used for setup and cleanup.

	* lib/diagramdata.c:
	Added calls to begin_render and end_render in data_render.

	* app/render_gdk.c:
	Added begin_render and end_render.

	* app/render_eps.[ch]:
	Added begin_render and end_render.
	Moved close_eps_renderer code to end_render.
	Various fixes to the generated eps code. This fixes importing
	generated eps into LYX.
	
1999-01-12  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Update of todo.
	
	* app/menus.c:
	Menus for alignment updated.

	* app/object_ops.[ch]:
	Functions for object alignment updated.

	* app/commands.[ch]:
	Object alignment callbacks updated.
	New diagrams are called Untitled-<nr>.

	* app/layer_dialog.c:
	Active layer selected when showing layers from new
	diagram.

	* app/load_save.c:
	Compress xml files when saving.
	Use xml namespace 'dia'.

	* lib/object.h:
	Minor comment update.

	* objects/UML/class_dialog.c:
	Cleanup of the gkt_list_item moving code.
	Fixed bug with update of operation when moving parameters.

1999-01-10  Alexander Larsson  <alla@lysator.liu.se>

	* app/layer_dialog.[ch]:
	Fixed the rest of the layers dialog.

	* app/dialog.c:
	Added call to redo layer dialogs diagram list when changing
	diagram name.

	* lib/diagramdata.[ch]:
	Added data_raise_layer and data_lower_layer functions for
	raising/lowering layers. Added data_add_layer_at for adding a
	layer at a specified index.

1999-01-05  Alexander Larsson  <alla@lysator.liu.se>

	This is the asierra-990105 patch done by asierra@servidor.unam.mx.
		
	* app/app_procs.c:
	Added support for reading diagrams from the command line.

1998-12-21  Alexander Larsson  <alla@lysator.liu.se>

	This is the asierra-981220 patch done by asierra@servidor.unam.mx.
		
	* app/commands.[ch]:
	Added objects_align_callback().

	* app/menus.c:
	Added align objects to menu.

	* app/object_ops.[ch]:
	Add object_list_align().
	
1998-12-17  Alexander Larsson  <alla@lysator.liu.se>
	* app/layer_dialog.[ch]:
	New files. Handles the layers dialog. Needs a bugfix for glib to
	work. Sent patch to gtk-list.
	
	* app/pixmaps/new.xpm:
	* app/pixmaps/eye.xbm:
	* app/pixmaps/lower.xpm:
	* app/pixmaps/raise.xpm:
	* app/pixmaps/delete.xpm:
	New files. Images for the layer dialog buttons.
	
	* lib/diagramdata.h
	* lib/diagramdata.c
	New files for the DiagramData and Layer structures and functions.
	
	* app/app_procs.c:
	Added call to create_layer_dialog() on startup.
	
	* app/commands.[ch]:
	New callbacks for showing the properties and layout dialog.
	Changes for the new DiagramData structure.

	* app/connectionpoint_ops.c:
	* app/cut_n_paste.c:
	* app/diagram.[ch]:
	* app/display.[ch]:
	* app/group.c:
	* app/modify_tool.c:
	* app/object_ops.[ch]:
	* app/render_eps.c:
	* lib/object.[ch]:
	Changes for the new DiagramData structure.

	* app/interface.c:
	* app/properties.c:
	Set correct wmclasses.

	* app/load_save.c:
	Fix load and save of layers.

	* diagram.dtd:
	Update DTD for layers.
	
	* app/menus.c:
	New menus for dialogs.

	
	* TODO:
	Some updates.
	
1998-12-06  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Removed the gtk 1.1.5 stuff.

	* configure.in:
	Updated gtk check to version 1.1.5.
	Updated version from 0.20 to 0.30

	* app/commands.[ch]:
	Updated some callbacks to be of type GtkItemFactoryCallback1.
	Not all are done yet, but it works anyway.

	* app/display.h:
	Removed Gtk 1.0.0 GtkAcceleratorTable references.
	
	* app/interface.c:
	* app/menus.[ch]:
	Update to Gtk 1.1.x functions.
	Use ItemFactory instead of MenuFactory.
	
	* app/render_gdk.c:
	Removed Gtk 1.0.0 references.

	* objects/UML/class_dialog.c:
	Scrolled window updates for Gtk 1.1.5.
	
	* lib/dia_xml.c:
	Removed ugly fix for gnome-xml bug. Make sure you get the
	newest version of gnome-xml from CVS.
	
1998-12-05  Alexander Larsson  <alla@lysator.liu.se>

	* TODO:
	Removed the xml load/save line.

	* lib/files.[ch]:
	Removed files.
	
	* lib/Makefile.am:
	Removed building of files.c

	* app/load_save.c:
	* lib/connection.c:
	* lib/element.c:
	* lib/object.c:
	* lib/orth_conn.c:
	* lib/render_object.c:
	* objects/UML/actor.c:
	* objects/UML/association.c:
	* objects/UML/class.c:
	* objects/UML/constraint.c:
	* objects/UML/dependency.c:
	* objects/UML/generalization.c:
	* objects/UML/implements.c:
	* objects/UML/large_package.c:
	* objects/UML/note.c:
	* objects/UML/realizes.c:
	* objects/UML/small_package.c:
	* objects/UML/uml.c:
	* objects/UML/usecase.c:
	* objects/network/bus.c:
	* objects/standard/arc.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/line.c:
	* objects/standard/textobj.c:
	* objects/standard/zigzagline.c:
	Removed all includes of files.h

	
1998-12-05  Alexander Larsson  <alla@lysator.liu.se>

	* dialog.dtd:
	Made the val property of string be implied.
	This makes it possible to save strings that
	are NULL. Just leave out val.

	* objects/lib/dia_xml.c:
	Fixed string so that it is possible to save strings
	that are NULL. Also made an ugly workaround of a
	bug in gnome-xml which removes empty properties.
	
	* objects/lib/orth_conn.c:
	Fixed a bug in saving. Forgot to step through the
	directions.
	
	* objects/UML/association.c: 
	* objects/UML/class.c: 
	* objects/UML/constraint.c: 
	* objects/UML/dependency.c: 
	* objects/UML/generalization.c: 
	* objects/UML/implements.c: 
	* objects/UML/large_package.c: 
	* objects/UML/note.c: 
	* objects/UML/small_package.c:
	* objects/UML/realizes.c:
	* objects/UML/usecase.c: 
	* objects/UML/actor.c: 
	Fixed UML objects to save as xml.
	The last two were done by asierra@servidor.unam.mx (asierra-981204)
	
	* objects/UML/uml.[ch]:
	Updated *_write() and *_read() functions to use xml.

	* objects/network/bus.c: 
	* objects/network/computer.c: 
	* objects/network/disc.c: 
	* objects/network/monitor.c:
	Updated network diagrams to use xml.

1998-12-02  Alexander Larsson  <alla@lysator.liu.se>

	* dialog.dtd:
	New file. DTD that describes the xml file format
	dia uses.

	* lib/dia_xml.[ch]:
	New files. Support for saving object to xml files.

	* configure.in:
	* app/Makefile.am:
	* lib/Makefile.am:
	Added check for and usage of gnome-xml library.

	* app/load_save.c:
	Major chages. Now saves/loads diagrams as xml.

	* lib/object.[ch]:
	* lib/element.[ch]:
	* lib/connection.[ch]:
	* lib/orth_conn.[ch]:
	* lib/render_object.[ch]:
	* lib/text.[ch]:
	Updated object support load/save functions for xml:

	* object/standard/arc.c:
	* object/standard/box.c:
	* object/standard/ellipse.c:
	* object/standard/line.c:
	* object/standard/textobj.c:
	* object/standard/zigzagline.c:
	Updated all standard objects to use xml.
	
	NOTE NOTE NOTE
	Only the standard objects are converted right now, don't
	save or load uml or network diagrams yet. Also, since this
	is new code it is deemed a bit unstable.
	
	* TODO
	Added a know bug.

1998-12-01  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/class.c:
	Changed classname font to Helvetica.
	Added more space above the classname

	* objects/UML/usecase.c:
	Correct placements of connectionpoints on ellipse.
	Better algorithm for deciding aspect ration on
	ellipse.

	These changes were made by Alejandro Aguilar Sierra
	<asierra@servidor.unam.mx>. (asierra-981201)

1998-11-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/actor.c:
	Changed the extents and alignment of the element
	and the text.

	* objects/UML/.cvsignore:
	Added usecase.lo and actor.lo.

1998-11-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/actor.c:
	* objects/UML/usecase.c:
	* objects/UML/pixmaps/actor.xpm:
	* objects/UML/pixmaps/case.xpm:
	New files. Implements usecase and actor UML objects.
	These objects are done by Alejandro Aguilar Sierra
	<asierra@servidor.unam.mx>.
	
	* objects/UML/Makefile.am:
	* objects/UML/pixmaps/Makefile.am:
	Added usecase and actor to makefile.
	
	* AUTHORS:
	Added Alejandro and Jerome to autors list.
	
1998-11-25  Alexander Larsson  <alla@lysator.liu.se>

	* objects/UML/class.c (umlclass_load):
	Fixed typo. Reported by Jerome.Abela@solsoft.fr

1998-11-24  Alexander Larsson  <alla@lysator.liu.se>

	* app/properties.c:
	Update connections when doing apply in the properties window.

	* objects/UML/uml.[ch]:
	* objects/UML/class.[ch]:
	* objects/UML/class_dialog.c:
	Added connection points on both sides of attributes and
	operations in UML classes.
	Based on idea from Jerome.Abela@solsoft.fr
	
1998-11-24  Alexander Larsson  <alla@lysator.liu.se>

	* README:
	Some new documentation about handles and connectionpoints.
	
	* lib/object.[ch]:
	Added functions object_add_connectionpoint and
	object_remove_connectionpoint for handling a dynamic
	number of connectionpoints.

	* objects/UML/class.c:
	Only reserve space for stereotype when it is shown.

	These changes are from Jerome Abela <Jerome.Abela@solsoft.fr>

1998-11-08  Alexander Larsson  <alla@lysator.liu.se>

	* app/connectionpoint_ops.c:
	* app/commands.c:
	* app/disp_callbacks.c:
	* app/display.[ch]:
	* app/grid.c:
	* app/handle_ops.c:
	* app/magnify.c:
	* app/modify_tool.c:
	* app/render_gdk.[ch]:
	* lib/render.h:
	Huge cleanup of internal rendering system.
	Moved a lot of data (pixmap, width, height & gc) into the GdkRenderer.
	This gives a few new methods for Interactive Renderers for setting
	clipping regions and drawing pixel based lines and rects.
	Updated the rest of the code to use the new stuff.
	
	* app/render_eps.c:
	Fixed warning.

	* lib/widgets.c:
	* objects/standard/zigzagline.c
	Fixed unused variable warnings.

	* lib/font.c:
	Fixedbug with stringwidth where width==0.

	* TODO:
	Added known bug.

1998-11-02  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	Added suppot for setting the font of a
	DiaFontSelector widget.
	Also fixed some typos in the header.

	* lib/object.h: 
	Added a comment about the GetPRoperties method call.
	You have to make sure to update widget state when
	this method is called. (Not all objects do this yet,
	to be fixed.)

	* TODO:
	Some small updates

1998-11-01  Alexander Larsson  <alla@lysator.liu.se>

	* lib/font.c
	Fixed problem with height of ascent and descent for fonts.
	It didn't use the whole height (==ascent+descent) when calculatine
	ascent_ratio and descent_ratio.

	* objects/standard/textobj.c:
	* objects/standard/box.c:
	* objects/standard/ellipse.c:
	* objects/standard/line.c:
	* objects/standard/arc.c:
	Updated and added property dialogs for these objects.
	Also added line width/color/style to those objects
	that didn't have it.
	This change breaks fileformat compatibility for these objects.
	
	* objects/standard/zigzagline.c:
	Changed zigzagline to be based on OrthConn, much nicer.
	Also added line style and color to properties.
	This change breaks fileformat compatibility for zigzagline.

	* lib/message.c:
	Fixed bug in message(). Forgot a pair of '&'.

1998-10-29  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	Added DiaColorSelector widget.
	This is a colored button that pops up a color selection
	dialog when pressed.

1998-10-28  Alexander Larsson  <alla@lysator.liu.se>

	* lib/widgets.[ch]:
	* lib/Makefile.am:
	New files, added widgets for selecting fonts, alignment
	and line-style. Will be used later.

1998-10-12  Alexander Larsson  <alla@lysator.liu.se>

	* app/Makefile.am:
	* lib/Makefile.am:
	* objects/UML/Makefile.am:
	* objects/network/Makefile.am:
	* objects/standard/Makefile.am:
	Changed "CFLAGS = -Wall -g" to "CFLAGS = @CFLAGS@"
	in all Makefile.am.

1998-10-03  Alexander Larsson  <alla@lysator.liu.se>

	* app/handle_ops.c (handle_draw):
	connected HANDLE_MINOR_CONTROL also becomes red.

1998-10-02  Alexander Larsson  <alla@lysator.liu.se>

	* Makefile.am:
	removed -ldl from linking. This is added if needed by configure.

	* app/app_procs.c:
	Open dlls with RTLD_LAZY if it is defined.
	Some cleanups: char *error -> const char *error
	Added fprintf()'s to where we exited because of errors.

	* lib/files.c:
	Include <sys/types.h>

1998-10-01  Alexander Larsson  <alla@lysator.liu.se>

	* acconfig.h:
	* configure.in:
	* app/app_procs.c:
	Detect dlopen better.
	Detect wether dlopen needs an underscore in the identifier.
	This code was mostly borrowed from guile.

	* lib/sheet.[ch]:
	* app/app_procs.c:
	* objects/standard/standard.c:
	* objects/network/network.c:
	* objects/UML/uml.c:
	* most objects:
	Changed the way sheets reference objects to use just the
	name. Changed module loading to a two stage model:
	First register_objects() is called for all modules.
	Then register_sheets() is called. This means that
	sheets can safely include objects from other modules.
	

1998-09-30  Alexander Larsson  <alla@lysator.liu.se>

	* objects/network/bus.c:
	* objects/network/network.c:
	* objects/network/Makefile.am:
	New file bus.c. Added new object: Ethernet bus.

	* objects/standard/box.c:
	Added call to gtk_spin_button_set_numeric for linewidth spinner
	in property dialog.

1998-09-30  Alexander Larsson  <alla@lysator.liu.se>

	* app/connectionpoint_ops.c:
	* app/create_object.c:
	* app/group.c:
	* app/handle_ops.c:
	* app/modify_tool.c:
	* lib/connection.c:
	* lib/element.c:
	* lib/handle.h:
	* lib/object.c:
	* lib/orth_conn.c:
	* loads of objects:
	Changed handle->connectable to handle->connect_type.
	Now handles can be HANDLE_CONNECTABLE_NOBREAK, which means
	that their connections don't break when moving objects.

	* app/diagram.c:
	Always select the last handle in an object that has
	the closest distance.
	
	* lib/geometry.[ch]:
	Added rectangle_add_point function.
	

1998-09-27  Alexander Larsson  <alla@lysator.liu.se>

	* app/properties.[ch]: New files. Handles the new properties
	dialog.

	* app/modify_tool.c: Changed to use new properties dialog.

	* app/object_ops.[ch]: Removed object_changed_callback, as it's
	not needed anymore. This is now handled differently in
	properties.c

	* lib/object.[ch]:
	Changed the properties ops for objects. Removed typedefs
	ChangedObjectTime and ObjectChangedFunc needed for the old way.
	Added object_return_null function.
	
	* app/group.c:
	* lib/render_object.c:
	* objects/*/*.c:
	Changed objects to use the new properties dialog.
	

1998-09-14  Nuno Ferreira  <nmrf@rnl.ist.utl.pt>

	* */Makefile.am (INCLUDES): Changes to work with srcdir !=
	builddir.

	* autogen.sh: New file. Copied from gtk and added a call to
	libtoolize. Anyone knows why this isn't done in gtk?

	* Removed autogenerated files.

1998-09-12  Alexander Larsson  <alla@lysator.liu.se>

	* Added call setlocale(LC_NUMERIC, "C") so that formating of
	  floating-point numbers in postscript output will be correct.
	* Did some cleanup of generated postscript files. 
